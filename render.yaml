services:
  # Web Service
  - type: web
    name: kronop-backend
    env: node
    plan: free
    runtime: node
    nodeVersion: 25.6.0
    buildCommand: "npm install --production"
    startCommand: "node server.js"
    healthCheckPath: /api/health
    autoDeploy: true
    
    # Environment Variables
    envVars:
      # Basic Configuration
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
        
      # Database Configuration (REQUIRED - Set manually in Render Dashboard)
      - key: MONGODB_URI
        sync: false
        description: "MongoDB connection string (set manually in Render dashboard)"
        
      # Redis Configuration (Optional)
      - key: REDIS_URL
        sync: false
        description: "Redis connection URL (optional)"
      - key: REDIS_TTL_SECONDS
        value: "30"
        
      # Bunny CDN Configuration - API Keys (Set manually in Render Dashboard)
      - key: BUNNY_API_KEY
        sync: false
        description: "Bunny CDN main API key"
      - key: BUNNY_ACCESS_KEY
        sync: false
        description: "Bunny CDN access key for photos"
      - key: BUNNY_ACCESS_KEY_REELS
        sync: false
        description: "Bunny CDN access key for reels"
      - key: BUNNY_ACCESS_KEY_VIDEO
        sync: false
        description: "Bunny CDN access key for videos"
      - key: BUNNY_ACCESS_KEY_LIVE
        sync: false
        description: "Bunny CDN access key for live streams"
      - key: BUNNY_ACCESS_KEY_STORY
        sync: false
        description: "Bunny CDN access key for stories"
        
      # Bunny CDN Configuration - Pre-configured Values
      - key: BUNNY_LIBRARY_ID_REELS
        value: "584910"
      - key: BUNNY_LIBRARY_ID_VIDEO
        value: "584911"
      - key: BUNNY_LIBRARY_ID_LIVE
        value: "584916"
      - key: BUNNY_LIBRARY_ID_STORY
        value: "584913"
        
      - key: BUNNY_HOST_REELS
        value: "vz-43e06bff-fc5.b-cdn.net"
      - key: BUNNY_HOST_VIDEO
        value: "vz-c9342ec7-688.b-cdn.net"
      - key: BUNNY_HOST_LIVE
        value: "vz-abea507d-489.b-cdn.net"
      - key: BUNNY_HOST_STORY
        value: "vz-0f58fe48-df9.b-cdn.net"
      - key: BUNNY_HOST_PHOTOS
        value: "storage.bunnycdn.com"
        
      - key: BUNNY_STORAGE_ZONE
        value: "photosusar"
        
      # Legacy Expo Variables (for frontend compatibility)
      - key: EXPO_PUBLIC_BUNNY_API_KEY
        sync: false
      - key: EXPO_PUBLIC_BUNNY_ACCESS_KEY
        sync: false
      - key: EXPO_PUBLIC_BUNNY_ACCESS_KEY_REELS
        sync: false
      - key: EXPO_PUBLIC_BUNNY_ACCESS_KEY_VIDEO
        sync: false
      - key: EXPO_PUBLIC_BUNNY_ACCESS_KEY_LIVE
        sync: false
      - key: EXPO_PUBLIC_BUNNY_ACCESS_KEY_STORY
        sync: false
        
      - key: EXPO_PUBLIC_BUNNY_LIBRARY_ID_REELS
        value: "584910"
      - key: EXPO_PUBLIC_BUNNY_LIBRARY_ID_VIDEO
        value: "584911"
      - key: EXPO_PUBLIC_BUNNY_LIBRARY_ID_LIVE
        value: "584916"
      - key: EXPO_PUBLIC_BUNNY_LIBRARY_ID_STORY
        value: "584913"
        
      - key: EXPO_PUBLIC_BUNNY_HOST_REELS
        value: "vz-43e06bff-fc5.b-cdn.net"
      - key: EXPO_PUBLIC_BUNNY_HOST_VIDEO
        value: "vz-c9342ec7-688.b-cdn.net"
      - key: EXPO_PUBLIC_BUNNY_HOST_LIVE
        value: "vz-abea507d-489.b-cdn.net"
      - key: EXPO_PUBLIC_BUNNY_HOST_STORY
        value: "vz-0f58fe48-df9.b-cdn.net"
      - key: EXPO_PUBLIC_BUNNY_HOST_PHOTOS
        value: "storage.bunnycdn.com"
      - key: EXPO_PUBLIC_BUNNY_STORAGE_ZONE
        value: "photosusar"
        
      # Other Configuration
      - key: JWT_SECRET
        sync: false
        description: "JWT secret key"
      - key: ONESIGNAL_REST_API_KEY
        sync: false
        description: "OneSignal REST API key"
      - key: EXPO_PUBLIC_ONESIGNAL_REST_API_KEY
        sync: false
        description: "OneSignal REST API key (Expo)"
      - key: EXPO_PUBLIC_ONESIGNAL_APP_ID
        sync: false
        description: "OneSignal App ID"
      - key: EXPO_PUBLIC_API_URL
        value: "https://kronop.onrender.com"

# Optional: Add PostgreSQL if needed in future
databases:
  # - type: postgres
  #   name: kronop-db
  #   plan: free
